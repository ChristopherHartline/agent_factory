<mxfile host="app.diagrams.net">
  <diagram id="product-arch" name="Product Architecture">
    <mxGraphModel dx="1434" dy="790" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="Agent Factory â€” Product Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="600" height="40" as="geometry"/>
        </mxCell>

        <!-- User Layer -->
        <mxCell id="user-box" value="USER / IDE" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="100" width="160" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="user-desc" value="Claude Code CLI&#xa;or Python Script" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="40" y="165" width="160" height="30" as="geometry"/>
        </mxCell>

        <!-- Arrow: User -> run_agent.py -->
        <mxCell id="arrow-1" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="user-box" target="run-agent-box">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="130" as="sourcePoint"/>
            <mxPoint x="280" y="130" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-1-label" value="Task + Template ID" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="arrow-1">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint x="10" y="-9" as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- run_agent.py -->
        <mxCell id="run-agent-box" value="run_agent.py" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="280" y="100" width="160" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="run-agent-desc" value="Entry point&#xa;â€¢ Starts MCP servers&#xa;â€¢ Registers tools&#xa;â€¢ Spawns agent" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="285" y="165" width="150" height="50" as="geometry"/>
        </mxCell>

        <!-- Factory Core Box -->
        <mxCell id="factory-core" value="AGENT FACTORY CORE" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="520" y="80" width="360" height="440" as="geometry"/>
        </mxCell>

        <!-- Prompt Registry -->
        <mxCell id="prompt-registry" value="Prompt Registry" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="540" y="120" width="150" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="prompt-desc" value="30 templates&#xa;â€¢ 12 v2 (full)&#xa;â€¢ 18 YAML (6 stubs)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="545" y="175" width="140" height="40" as="geometry"/>
        </mxCell>

        <!-- Tool Registry -->
        <mxCell id="tool-registry" value="Tool Registry" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="710" y="120" width="150" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="tool-registry-desc" value="Tool definitions&#xa;â€¢ MCP tools&#xa;â€¢ LangChain tools&#xa;â€¢ Functions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="715" y="175" width="140" height="40" as="geometry"/>
        </mxCell>

        <!-- Prompt Composer -->
        <mxCell id="composer" value="Prompt Composer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="540" y="240" width="320" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="composer-desc" value="5-Layer Pattern: Identity â†’ Tool Instructions â†’ Reasoning â†’ I/O Contract â†’ Guardrails&#xa;Resolves {{TOOL_BLOCK:tool_id}} placeholders with actual tool prompt_instructions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="545" y="295" width="310" height="35" as="geometry"/>
        </mxCell>

        <!-- Agent Runtime -->
        <mxCell id="runtime" value="Agent Runtime" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="540" y="350" width="320" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="runtime-desc" value="â€¢ deepagents (full features: planning, filesystem, sub-agents)&#xa;â€¢ langgraph (fallback: basic ReAct loop)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="545" y="405" width="310" height="30" as="geometry"/>
        </mxCell>

        <!-- Spawn Result -->
        <mxCell id="spawn-result" value="SpawnResult" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="540" y="455" width="320" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="spawn-desc" value="agent_id, compiled agent, tools_attached, tools_missing, composed_prompt, genealogy" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="545" y="468" width="310" height="25" as="geometry"/>
        </mxCell>

        <!-- Arrows inside factory -->
        <mxCell id="arrow-registry-composer-1" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="prompt-registry" target="composer">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="300" as="sourcePoint"/>
            <mxPoint x="650" y="250" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-registry-composer-2" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="tool-registry" target="composer">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="300" as="sourcePoint"/>
            <mxPoint x="650" y="250" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-composer-runtime" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="composer" target="runtime">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="380" as="sourcePoint"/>
            <mxPoint x="650" y="330" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-runtime-spawn" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="runtime" target="spawn-result">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="480" as="sourcePoint"/>
            <mxPoint x="650" y="430" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Arrow: run_agent -> factory -->
        <mxCell id="arrow-2" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="run-agent-box" target="prompt-registry">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="440" y="130" as="sourcePoint"/>
            <mxPoint x="520" y="145" as="targetPoint"/>
          </mxGeometry>
        </mxCell>

        <!-- Live Agent Box -->
        <mxCell id="live-agent" value="LIVE AGENT" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="960" y="80" width="400" height="440" as="geometry"/>
        </mxCell>

        <!-- Agent Instance -->
        <mxCell id="agent-instance" value="Agent Instance" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="980" y="120" width="360" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="agent-desc" value="financial-analyst-v2-1&#xa;Model: claude-sonnet-4-5-20250929 | Tools: [calculator] | Prompt: 3198 chars" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="985" y="145" width="350" height="25" as="geometry"/>
        </mxCell>

        <!-- ReAct Loop -->
        <mxCell id="react-loop" value="ReAct Loop" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="980" y="190" width="360" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="react-desc" value="Think â†’ Act (call tool) â†’ Observe (get result) â†’ repeat" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="985" y="215" width="350" height="25" as="geometry"/>
        </mxCell>

        <!-- Tool Calls -->
        <mxCell id="tool-calls" value="Tool Execution" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="980" y="260" width="360" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="tool-calls-desc" value="Agent invokes tools â†’ MCP servers handle requests â†’ results returned" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="985" y="285" width="350" height="25" as="geometry"/>
        </mxCell>

        <!-- Response -->
        <mxCell id="response" value="Final Response" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="980" y="330" width="360" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="response-desc" value="Formatted output returned to user" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="985" y="355" width="350" height="25" as="geometry"/>
        </mxCell>

        <!-- Genealogy Tracking -->
        <mxCell id="genealogy" value="Genealogy Tracking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="980" y="400" width="360" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="genealogy-desc" value="agent_id, template_id, parent_agent_id, depth, spawn_time" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="985" y="425" width="350" height="25" as="geometry"/>
        </mxCell>

        <!-- Arrow: factory -> agent -->
        <mxCell id="arrow-3" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="spawn-result" target="agent-instance">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="480" as="sourcePoint"/>
            <mxPoint x="960" y="145" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="920" y="480"/>
              <mxPoint x="920" y="145"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-3-label" value="Spawned Agent" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="arrow-3">
          <mxGeometry x="-0.5" y="2" relative="1" as="geometry">
            <mxPoint x="5" y="-8" as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- MCP Tools Box -->
        <mxCell id="mcp-tools" value="MCP TOOL SERVERS" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="40" y="580" width="1320" height="360" as="geometry"/>
        </mxCell>

        <!-- Communication Protocol -->
        <mxCell id="protocol-box" value="Communication: stdio JSON-RPC 2.0" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="620" width="280" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="protocol-desc" value="â€¢ Subprocess launch (python -m mcp_tools.servers.X)&#xa;â€¢ Line-buffered JSON messages via stdin/stdout&#xa;â€¢ Methods: ping, tools/list, tools/call&#xa;â€¢ Automatic tool discovery and registration" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="65" y="665" width="270" height="55" as="geometry"/>
        </mxCell>

        <!-- Current Tools -->
        <mxCell id="current-tools-label" value="âœ… CURRENT TOOLS (Implemented)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="380" y="620" width="280" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="calculator-box" value="calculator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="380" y="655" width="130" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="calculator-desc" value="â€¢ calculate&#xa;â€¢ convert_units" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="385" y="690" width="120" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="echo-box" value="echo" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="530" y="655" width="130" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="echo-desc" value="Test server&#xa;Echoes input back" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="535" y="690" width="120" height="25" as="geometry"/>
        </mxCell>

        <!-- Planned Tools -->
        <mxCell id="planned-tools-label" value="ðŸš§ PLANNED TOOLS (Priority 1)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="380" y="740" width="280" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="web-search-box" value="web_search" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="380" y="775" width="130" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="web-search-desc" value="DuckDuckGo/Brave&#xa;Real-time web search" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="385" y="810" width="120" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="web-fetch-box" value="web_fetch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="530" y="775" width="130" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="web-fetch-desc" value="HTTP client&#xa;Fetch URLs/APIs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="535" y="810" width="120" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="file-system-box" value="file_system" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="680" y="775" width="130" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="file-system-desc" value="Read/write files&#xa;Path restrictions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="685" y="810" width="120" height="25" as="geometry"/>
        </mxCell>

        <!-- Planned Tools (Priority 2) -->
        <mxCell id="planned-tools-label-2" value="ðŸ”® PLANNED TOOLS (Priority 2)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="830" y="740" width="280" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="code-exec-box" value="code_executor" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="830" y="775" width="130" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="code-exec-desc" value="Python/JS sandbox&#xa;Docker/E2B" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="835" y="810" width="120" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="db-box" value="database_query" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="980" y="775" width="130" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="db-desc" value="SQLite/Postgres&#xa;Read-only mode" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="985" y="810" width="120" height="25" as="geometry"/>
        </mxCell>

        <mxCell id="chart-box" value="chart_generator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1130" y="775" width="130" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="chart-desc" value="Matplotlib/Plotly&#xa;Visualizations" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1135" y="810" width="120" height="25" as="geometry"/>
        </mxCell>

        <!-- Template-Specific Tools -->
        <mxCell id="template-tools-label" value="ðŸ“Š TEMPLATE-SPECIFIC TOOLS (Future)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="380" y="860" width="280" height="30" as="geometry"/>
        </mxCell>

        <mxCell id="market-box" value="market_data_api" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="380" y="895" width="130" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="market-desc" value="Alpha Vantage&#xa;Stock market data" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="385" y="885" width="120" height="15" as="geometry"/>
        </mxCell>

        <mxCell id="image-box" value="image_gen" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="530" y="895" width="130" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="image-desc" value="DALL-E/Midjourney&#xa;Image generation" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="535" y="885" width="120" height="15" as="geometry"/>
        </mxCell>

        <!-- Arrow: agent -> tools -->
        <mxCell id="arrow-4" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="tool-calls" target="protocol-box">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1160" y="450" as="sourcePoint"/>
            <mxPoint x="200" y="620" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="1160" y="550"/>
              <mxPoint x="200" y="550"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-4-label" value="Tool calls via stdio JSON-RPC" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="arrow-4">
          <mxGeometry x="0.1" y="1" relative="1" as="geometry">
            <mxPoint x="120" y="-9" as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- Arrow: tools -> agent -->
        <mxCell id="arrow-5" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="calculator-box" target="tool-calls">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="445" y="580" as="sourcePoint"/>
            <mxPoint x="1250" y="320" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="445" y="540"/>
              <mxPoint x="1250" y="540"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-5-label" value="Results returned" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" vertex="1" connectable="0" parent="arrow-5">
          <mxGeometry x="0.3" y="1" relative="1" as="geometry">
            <mxPoint x="100" y="9" as="offset"/>
          </mxGeometry>
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" value="LEGEND" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;fontStyle=1;verticalAlign=top;align=left;" vertex="1" parent="1">
          <mxGeometry x="40" y="280" width="200" height="120" as="geometry"/>
        </mxCell>
        <mxCell id="legend-1" value="User/Interface" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="50" y="305" width="80" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-2" value="Entry Point" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="50" y="330" width="80" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-3" value="Factory Core" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="50" y="355" width="80" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-4" value="Live Agent" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="50" y="380" width="80" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-5" value="âœ… Implemented" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="145" y="305" width="80" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-6" value="ðŸš§ Priority 1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="145" y="330" width="80" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-7" value="ðŸ”® Priority 2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="145" y="355" width="80" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="legend-8" value="ðŸ“Š Future" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="145" y="380" width="80" height="20" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
